{"remainingRequest":"D:\\WorkSpace\\localCode\\CS211180\\client_home\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\localCode\\CS211180\\client_home\\src\\views\\message_wall\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_home\\src\\views\\message_wall\\edit.vue","mtime":1710335278558},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_home\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_home\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_home\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgbWl4aW4gZnJvbSAiQC9taXhpbnMvcGFnZS5qcyI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbWl4aW5zOiBbbWl4aW5dLA0KICBjb21wb25lbnRzOiB7fSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXJsX2dldF9vYmo6ICJ+L2FwaS9tZXNzYWdlX3dhbGwvZ2V0X29iaj8iLA0KICAgICAgdXJsX2FkZDogIn4vYXBpL21lc3NhZ2Vfd2FsbC9hZGQ/IiwNCiAgICAgIHVybF9zZXQ6ICJ+L2FwaS9tZXNzYWdlX3dhbGwvc2V0PyIsDQoNCiAgICAgIC8vIOeZu+W9leadg+mZkA0KICAgICAgb2F1dGg6IHsNCiAgICAgICAgInNpZ25JbiI6IHRydWUsDQogICAgICAgICJ1c2VyX2dyb3VwIjogW10NCiAgICAgIH0sDQoNCiAgICAgIC8vIOafpeivouadoeS7tg0KICAgICAgcXVlcnk6IHsNCiAgICAgICAgIm1lc3NhZ2VfdGl0bGUiOiAiIiwNCiAgICAgICAgIm1lc3NhZ2VfdGltZSI6ICIiLA0KICAgICAgICAibWVzc2FnZV9wZXJzb24iOiAwLA0KICAgICAgICAibWVzc2FnZV9jb250ZW50IjogIiIsDQogICAgICAgICJjb3ZlciI6ICIiLA0KICAgICAgICAibWVzc2FnZV93YWxsX2lkIjogMCwNCiAgICAgIH0sDQoNCiAgICAgIG9iajogew0KICAgICAgICAibWVzc2FnZV90aXRsZSI6ICcnLCAvLyDnlZnoqIDmoIfpopgNCiAgICAgICAgIm1lc3NhZ2VfdGltZSI6ICIxOTcwLTAxLTAxIDAwOjAwOjAwIiwNCiAgICAgICAgIm1lc3NhZ2VfcGVyc29uIjogMCwgLy8g55WZ6KiA5Lq6DQogICAgICAgICJtZXNzYWdlX2NvbnRlbnQiOiAnJywgLy8g55WZ6KiA5YaF5a65DQogICAgICAgICJjb3ZlciI6ICcnLCAvLyDlsIHpnaINCiAgICAgICAgIm1lc3NhZ2Vfd2FsbF9pZCI6IDAsDQogICAgICB9LA0KDQogICAgICAvLyDooajljZXlrZfmrrUNCiAgICAgIGZvcm06IHsNCiAgICAgICAgIm1lc3NhZ2VfdGl0bGUiOiAnJywgLy8g55WZ6KiA5qCH6aKYDQogICAgICAgICJtZXNzYWdlX3RpbWUiOiAiMTk3MC0wMS0wMSAwMDowMDowMCIsDQogICAgICAgICJtZXNzYWdlX3BlcnNvbiI6IDAsIC8vIOeVmeiogOS6ug0KICAgICAgICAibWVzc2FnZV9jb250ZW50IjogJycsIC8vIOeVmeiogOWGheWuuQ0KICAgICAgICAiY292ZXIiOiAnJywgLy8g5bCB6Z2iDQogICAgICAgICJtZXNzYWdlX3dhbGxfaWQiOiAwLA0KDQogICAgICB9LA0KICAgICAgZGlzYWJsZWRPYmo6IHsNCiAgICAgICAgIm1lc3NhZ2VfdGl0bGVfaXNEaXNhYmxlZCI6IGZhbHNlLA0KICAgICAgICAibWVzc2FnZV90aW1lX2lzRGlzYWJsZWQiOiBmYWxzZSwNCiAgICAgICAgIm1lc3NhZ2VfcGVyc29uX2lzRGlzYWJsZWQiOiBmYWxzZSwNCiAgICAgICAgIm1lc3NhZ2VfY29udGVudF9pc0Rpc2FibGVkIjogZmFsc2UsDQogICAgICAgICJjb3Zlcl9pc0Rpc2FibGVkIjogZmFsc2UsDQogICAgICB9LA0KICAgICAgLy8g55So5oi35YiX6KGoDQogICAgICBsaXN0X3VzZXJfbWVzc2FnZV9wZXJzb246IFtdLA0KDQogICAgICAvLyBJROWtl+autQ0KICAgICAgZmllbGQ6ICJtZXNzYWdlX3dhbGxfaWQiLA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHN1Ym1pdF9OZXcoKXsNCiAgICAgIHZhciB1cmwgPSB0aGlzLiRmdWxsVXJsKHRoaXMudXJsX2FkZCkNCiAgICAgIGNvbnN0IHsgbWVzc2FnZV93YWxsX2lkLCAuLi5uZXdGb3JtIH0gPSB0aGlzLmZvcm07DQogICAgICBjb25zb2xlLmxvZygidXJsLS0+Iix1cmwpDQogICAgICBjb25zb2xlLmxvZygibmV3Rm9ybS0tPiIsbmV3Rm9ybSkNCiAgICAgIHZhciBwYXJhbSA9IG5ld0Zvcm07DQogICAgICB0aGlzLiRwb3N0KHVybCwgcGFyYW0sIGZ1bmN0aW9uKGpzb24sIHN0YXR1cykgew0KICAgICAgICB0aGlzLiR0b2FzdCgn5o+Q5Lqk5oiQ5Yqf77yBJywgJ3N1Y2Nlc3MnKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLyoqDQogICAgICog6I635Y+W5a2m55Sf55So5oi35YiX6KGoDQogICAgICovDQogICAgYXN5bmMgZ2V0X2xpc3RfdXNlcl9tZXNzYWdlX3BlcnNvbigpIHsNCiAgICAgIC8vIGlmKHRoaXMudXNlcl9ncm91cCAhPT0gIueuoeeQhuWRmCIgJiYgdGhpcy5mb3JtWyJtZXNzYWdlX3BlcnNvbiJdID09PSAwKSB7DQogICAgICAvLyAgICAgdGhpcy5mb3JtWyJtZXNzYWdlX3BlcnNvbiJdID0gdGhpcy51c2VyLnVzZXJfaWQ7DQogICAgICAvLyB9DQogICAgICB2YXIganNvbiA9IGF3YWl0IHRoaXMuJGdldCgifi9hcGkvdXNlci9nZXRfbGlzdD91c2VyX2dyb3VwPeWtpueUnyIpOw0KICAgICAgaWYgKGpzb24ucmVzdWx0ICYmIGpzb24ucmVzdWx0Lmxpc3QpIHsNCiAgICAgICAgdGhpcy5saXN0X3VzZXJfbWVzc2FnZV9wZXJzb24gPSBqc29uLnJlc3VsdC5saXN0Ow0KICAgICAgfSBlbHNlIGlmIChqc29uLmVycm9yKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoanNvbi5lcnJvcik7DQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBnZXRfdXNlcl9zZXNzaW9uX21lc3NhZ2VfcGVyc29uKCkgew0KICAgICAgdmFyIF90aGlzID0gdGhpczsNCiAgICAgIHZhciBqc29uID0gYXdhaXQgdGhpcy4kZ2V0KCJ+L2FwaS91c2VyX2dyb3VwL2dldF9vYmo/bmFtZT3lrabnlJ8iKTsNCiAgICAgIGlmIChqc29uLnJlc3VsdCAmJiBqc29uLnJlc3VsdC5vYmopIHsNCiAgICAgICAgLy8gdmFyIHNvdXJjZV90YWJsZSA9IGpzb24ucmVzdWx0Lm9iai5zb3VyY2VfdGFibGU7DQogICAgICAgIHZhciBzb3VyY2VfdGFibGUgPSAnbWVzc2FnZV93YWxsJw0KICAgICAgICB2YXIgdXNlcl9pZCA9IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWQ7DQogICAgICAgIGlmICh1c2VyX2lkKSB7DQogICAgICAgICAgdmFyIHVybCA9ICJ+L2FwaS8iICsgc291cmNlX3RhYmxlICsgIi9nZXRfb2JqPyINCiAgICAgICAgICB0aGlzLiRnZXQodXJsLCB7Im1lc3NhZ2Vfd2FsbF9pZCI6IF90aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnVzZXJfaWR9LCBmdW5jdGlvbiAocmVzKSB7DQogICAgICAgICAgICBpZiAocmVzLnJlc3VsdCAmJiByZXMucmVzdWx0Lm9iaikgew0KICAgICAgICAgICAgICB2YXIgYXJyID0gW10NCiAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHJlcy5yZXN1bHQub2JqKSB7DQogICAgICAgICAgICAgICAgYXJyLnB1c2goa2V5KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHZhciBhcnJGb3JtID0gW10NCiAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIF90aGlzLmZvcm0pIHsNCiAgICAgICAgICAgICAgICBhcnJGb3JtLnB1c2goa2V5KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIF90aGlzLmZvcm1bIm1lc3NhZ2VfcGVyc29uIl0gPSB1c2VyX2lkDQogICAgICAgICAgICAgIF90aGlzLmRpc2FibGVkT2JqWydtZXNzYWdlX3BlcnNvbicgKyAnX2lzRGlzYWJsZWQnXSA9IHRydWUNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyckZvcm0ubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IGFyckZvcm1bal0pIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFycltpXSAhPT0gIm1lc3NhZ2VfcGVyc29uIikgew0KICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm1bYXJyRm9ybVtqXV0gPSByZXMucmVzdWx0Lm9ialthcnJbaV1dDQogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGlzYWJsZWRPYmpbYXJyRm9ybVtqXSArICdfaXNEaXNhYmxlZCddID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAoanNvbi5lcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKGpzb24uZXJyb3IpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiDkv67mlLnmlofku7YNCiAgICAgKiBAcGFyYW0geyBPYmplY3QgfSBmaWxlcyDkuIrkvKDmlofku7blr7nosaENCiAgICAgKiBAcGFyYW0geyBTdHJpbmcgfSBzdHIg6KGo5Y2V55qE5bGe5oCn5ZCNDQogICAgICovDQogICAgY2hhbmdlX2ZpbGUoZmlsZXMsIHN0cikgew0KICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIGZvcm0uYXBwZW5kKCJmaWxlIiwgZmlsZXNbMF0pOw0KICAgICAgdGhpcy4kcG9zdCgifi9hcGkvbWVzc2FnZV93YWxsL3VwbG9hZD8iLCBmb3JtLCAocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMucmVzdWx0KSB7DQogICAgICAgICAgdGhpcy5mb3JtW3N0cl0gPSByZXMucmVzdWx0LnVybDsNCiAgICAgICAgfSBlbHNlIGlmIChyZXMuZXJyb3IpIHsNCiAgICAgICAgICB0aGlzLiR0b2FzdChyZXMuZXJyb3IubWVzc2FnZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiDojrflj5blr7nosaHlkI7ojrflj5bnvJPlrZjooajljZUNCiAgICAgKiBAcGFyYW0ge09iamVjdH0ganNvbg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmdW5jDQogICAgICovDQogICAgZ2V0X29ial9iZWZvcmUocGFyYW0pIHsNCiAgICAgIHZhciBmb3JtID0gJC5kYi5nZXQoImZvcm0iKTsNCiAgICAgIGlmIChmb3JtKSB7DQogICAgICAgIHRoaXMub2JqID0gJC5wdXNoKHRoaXMub2JqLCBmb3JtKTsNCiAgICAgICAgdGhpcy5mb3JtID0gJC5wdXNoKHRoaXMuZm9ybSwgZm9ybSk7DQogICAgICB9DQogICAgICB2YXIgYXJyID0gW10NCiAgICAgIGZvciAobGV0IGtleSBpbiBmb3JtKSB7DQogICAgICAgIGFyci5wdXNoKGtleSkNCiAgICAgIH0NCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIHRoaXMuZGlzYWJsZWRPYmpbYXJyW2ldICsgJ19pc0Rpc2FibGVkJ10gPSB0cnVlDQogICAgICB9DQogICAgICB0aGlzLmZvcm1bIm1lc3NhZ2VfdGltZSJdID0gdGhpcy4kdG9UaW1lKHBhcnNlSW50KHRoaXMuZm9ybVsibWVzc2FnZV90aW1lIl0pLCAieXl5eS1NTS1kZCIpDQogICAgICByZXR1cm4gcGFyYW07DQogICAgfSwNCg0KICAgIC8qKg0KICAgICAqIOiOt+WPluWvueixoeWQjuiOt+WPlue8k+WtmOihqOWNlQ0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBqc29uDQogICAgICogQHBhcmFtIHtPYmplY3R9IGZ1bmMNCiAgICAgKi8NCiAgICBnZXRfb2JqX2FmdGVyKGpzb24sIGZ1bmMpIHsNCiAgICAgIHZhciBmb3JtID0gJC5kYi5nZXQoImZvcm0iKTsNCiAgICAgIHZhciBvYmogPSBPYmplY3QuYXNzaWduKHt9LCBmb3JtLCB0aGlzLm9iaik7DQogICAgICBpZiAoZm9ybSkgew0KICAgICAgICB0aGlzLm9iaiA9ICQucHVzaCh0aGlzLm9iaiwgb2JqKTsNCiAgICAgIH0NCiAgICAgIGlmIChmb3JtKSB7DQogICAgICAgIHRoaXMuZm9ybSA9ICQucHVzaCh0aGlzLmZvcm0sIGZvcm0pOw0KICAgICAgfQ0KICAgICAgaWYgKGZ1bmMpIHsNCiAgICAgICAgZnVuYyhqc29uKTsNCiAgICAgIH0NCiAgICB9LA0KDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRfdXNlcl9zZXNzaW9uX21lc3NhZ2VfcGVyc29uKCk7DQogICAgdGhpcy5nZXRfbGlzdF91c2VyX21lc3NhZ2VfcGVyc29uKCk7DQogIH0NCn0NCg=="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/message_wall","sourcesContent":["<template>\r\n  <div class=\"diy_edit page_message_wall\" id=\"message_wall_edit\">\r\n    <div class='warp'>\r\n      <div class='container'>\r\n        <div class='row'>\r\n          <div class=\"col-12 col-md-6\">\r\n            <div class=\"diy_title\">\r\n\t\t\t\t\t\t\t<span>留言标题:\r\n\t\t\t\t\t\t\t</span>\r\n            </div>\r\n            <!-- 文本 -->\r\n            <div class=\"diy_field diy_text\">\r\n              <input type=\"text\" id=\"form_message_title\" v-model=\"form['message_title']\" placeholder=\"请输入标题\"/>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 col-md-6\">\r\n            <div class=\"diy_title\">\r\n\t\t\t\t\t\t\t<span>留言时间:\r\n\t\t\t\t\t\t\t</span>\r\n            </div>\r\n            <!-- 日期 -->\r\n            <div class=\"diy_field diy_date\">\r\n              <input type=\"date\"  id=\"form_message_time\"\r\n                     v-model=\"form['message_time']\" placeholder=\"请输入留言时间\"/>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 col-md-6\">\r\n            <div class=\"diy_title\">\r\n\t\t\t\t\t\t\t<span>留言人:\r\n\t\t\t\t\t\t\t</span>\r\n            </div>\r\n            <div class=\"diy_field diy_down\">\r\n              <!-- 文本 -->\r\n              <div class=\"diy_field diy_text\">\r\n                <input type=\"text\" id=\"form_message_title\" v-model=\"form['message_person']\" placeholder=\"请输入留言人名字\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 col-md-6\">\r\n            <div class=\"diy_title\">\r\n\t\t\t\t\t\t\t<span>留言内容:\r\n\t\t\t\t\t\t\t</span>\r\n            </div>\r\n            <!-- 多文本 -->\r\n            <div class=\"diy_field diy_desc\">\r\n              <textarea id=\"form_message_content\" v-model=\"form['message_content']\" style=\"width: 380px;\"/>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-12 col-md-6\">\r\n            <div class=\"diy_title\">\r\n\t\t\t\t\t\t\t<span>封面:\r\n\t\t\t\t\t\t\t</span>\r\n            </div>\r\n            <!-- 图片 -->\r\n            <input type=\"file\" style=\"display: none;\" id=\"form_img_cover\"\r\n                   title=\"cover\" @change=\"change_file($event.target.files,'cover')\"/>\r\n            <div class=\"diy_field diy_img\" onclick=\"document.getElementById('form_img_cover').click()\">\r\n              <img :src=\"$fullUrl(form['cover'])\"/>\r\n            </div>\r\n            <!-- 修改权限 -->\r\n<!--            <div class=\"diy_field diy_img\" v-if=\"form['cover'] && $check_field('set','cover')\">-->\r\n<!--              <label for=\"form_img_cover\">-->\r\n<!--                <img :src=\"$fullUrl(form['cover'])\"/>-->\r\n<!--              </label>-->\r\n<!--            </div>-->\r\n            <!-- 添加权限 -->\r\n<!--            <div class=\"diy_field diy_img\" v-else-if=\"!form['cover'] && $check_field('add','cover')\">-->\r\n<!--              <label for=\"form_img_cover\">-->\r\n<!--                <div class=\"btn_add_img\">-->\r\n<!--                  <span>+</span>-->\r\n<!--                </div>-->\r\n<!--              </label>-->\r\n<!--            </div>-->\r\n            <!-- 查询权限 -->\r\n<!--            <div class=\"diy_field diy_img\" v-else-if=\"$check_field('get','cover')\">-->\r\n<!--              <img :src=\"$fullUrl(form['cover'])\"/>-->\r\n<!--            </div>-->\r\n\r\n          </div>\r\n\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col-12\">\r\n            <div class=\"btn_box\">\r\n              <button style=\"position: relative; left: 450px;\" class=\"btn_submit\" @click=\"submit_New()\">提交</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mixin from \"@/mixins/page.js\";\r\n\r\nexport default {\r\n  mixins: [mixin],\r\n  components: {},\r\n  data() {\r\n    return {\r\n      url_get_obj: \"~/api/message_wall/get_obj?\",\r\n      url_add: \"~/api/message_wall/add?\",\r\n      url_set: \"~/api/message_wall/set?\",\r\n\r\n      // 登录权限\r\n      oauth: {\r\n        \"signIn\": true,\r\n        \"user_group\": []\r\n      },\r\n\r\n      // 查询条件\r\n      query: {\r\n        \"message_title\": \"\",\r\n        \"message_time\": \"\",\r\n        \"message_person\": 0,\r\n        \"message_content\": \"\",\r\n        \"cover\": \"\",\r\n        \"message_wall_id\": 0,\r\n      },\r\n\r\n      obj: {\r\n        \"message_title\": '', // 留言标题\r\n        \"message_time\": \"1970-01-01 00:00:00\",\r\n        \"message_person\": 0, // 留言人\r\n        \"message_content\": '', // 留言内容\r\n        \"cover\": '', // 封面\r\n        \"message_wall_id\": 0,\r\n      },\r\n\r\n      // 表单字段\r\n      form: {\r\n        \"message_title\": '', // 留言标题\r\n        \"message_time\": \"1970-01-01 00:00:00\",\r\n        \"message_person\": 0, // 留言人\r\n        \"message_content\": '', // 留言内容\r\n        \"cover\": '', // 封面\r\n        \"message_wall_id\": 0,\r\n\r\n      },\r\n      disabledObj: {\r\n        \"message_title_isDisabled\": false,\r\n        \"message_time_isDisabled\": false,\r\n        \"message_person_isDisabled\": false,\r\n        \"message_content_isDisabled\": false,\r\n        \"cover_isDisabled\": false,\r\n      },\r\n      // 用户列表\r\n      list_user_message_person: [],\r\n\r\n      // ID字段\r\n      field: \"message_wall_id\",\r\n    }\r\n  },\r\n  methods: {\r\n    submit_New(){\r\n      var url = this.$fullUrl(this.url_add)\r\n      const { message_wall_id, ...newForm } = this.form;\r\n      console.log(\"url-->\",url)\r\n      console.log(\"newForm-->\",newForm)\r\n      var param = newForm;\r\n      this.$post(url, param, function(json, status) {\r\n        this.$toast('提交成功！', 'success');\r\n      });\r\n    },\r\n    /**\r\n     * 获取学生用户列表\r\n     */\r\n    async get_list_user_message_person() {\r\n      // if(this.user_group !== \"管理员\" && this.form[\"message_person\"] === 0) {\r\n      //     this.form[\"message_person\"] = this.user.user_id;\r\n      // }\r\n      var json = await this.$get(\"~/api/user/get_list?user_group=学生\");\r\n      if (json.result && json.result.list) {\r\n        this.list_user_message_person = json.result.list;\r\n      } else if (json.error) {\r\n        console.error(json.error);\r\n      }\r\n    },\r\n    async get_user_session_message_person() {\r\n      var _this = this;\r\n      var json = await this.$get(\"~/api/user_group/get_obj?name=学生\");\r\n      if (json.result && json.result.obj) {\r\n        // var source_table = json.result.obj.source_table;\r\n        var source_table = 'message_wall'\r\n        var user_id = _this.$store.state.user.user_id;\r\n        if (user_id) {\r\n          var url = \"~/api/\" + source_table + \"/get_obj?\"\r\n          this.$get(url, {\"message_wall_id\": _this.$store.state.user.user_id}, function (res) {\r\n            if (res.result && res.result.obj) {\r\n              var arr = []\r\n              for (let key in res.result.obj) {\r\n                arr.push(key)\r\n              }\r\n              var arrForm = []\r\n              for (let key in _this.form) {\r\n                arrForm.push(key)\r\n              }\r\n              _this.form[\"message_person\"] = user_id\r\n              _this.disabledObj['message_person' + '_isDisabled'] = true\r\n              for (var i = 0; i < arr.length; i++) {\r\n                for (var j = 0; j < arrForm.length; j++) {\r\n                  if (arr[i] === arrForm[j]) {\r\n                    if (arr[i] !== \"message_person\") {\r\n                      _this.form[arrForm[j]] = res.result.obj[arr[i]]\r\n                      _this.disabledObj[arrForm[j] + '_isDisabled'] = true\r\n                      break;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      } else if (json.error) {\r\n        console.error(json.error);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 修改文件\r\n     * @param { Object } files 上传文件对象\r\n     * @param { String } str 表单的属性名\r\n     */\r\n    change_file(files, str) {\r\n      var form = new FormData();\r\n      form.append(\"file\", files[0]);\r\n      this.$post(\"~/api/message_wall/upload?\", form, (res) => {\r\n        if (res.result) {\r\n          this.form[str] = res.result.url;\r\n        } else if (res.error) {\r\n          this.$toast(res.error.message);\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取对象后获取缓存表单\r\n     * @param {Object} json\r\n     * @param {Object} func\r\n     */\r\n    get_obj_before(param) {\r\n      var form = $.db.get(\"form\");\r\n      if (form) {\r\n        this.obj = $.push(this.obj, form);\r\n        this.form = $.push(this.form, form);\r\n      }\r\n      var arr = []\r\n      for (let key in form) {\r\n        arr.push(key)\r\n      }\r\n      for (var i = 0; i < arr.length; i++) {\r\n        this.disabledObj[arr[i] + '_isDisabled'] = true\r\n      }\r\n      this.form[\"message_time\"] = this.$toTime(parseInt(this.form[\"message_time\"]), \"yyyy-MM-dd\")\r\n      return param;\r\n    },\r\n\r\n    /**\r\n     * 获取对象后获取缓存表单\r\n     * @param {Object} json\r\n     * @param {Object} func\r\n     */\r\n    get_obj_after(json, func) {\r\n      var form = $.db.get(\"form\");\r\n      var obj = Object.assign({}, form, this.obj);\r\n      if (form) {\r\n        this.obj = $.push(this.obj, obj);\r\n      }\r\n      if (form) {\r\n        this.form = $.push(this.form, form);\r\n      }\r\n      if (func) {\r\n        func(json);\r\n      }\r\n    },\r\n\r\n  },\r\n  created() {\r\n    this.get_user_session_message_person();\r\n    this.get_list_user_message_person();\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}