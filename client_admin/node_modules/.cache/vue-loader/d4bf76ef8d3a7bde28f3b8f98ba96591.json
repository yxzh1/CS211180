{"remainingRequest":"D:\\WorkSpace\\localCode\\CS211180\\client_admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\localCode\\CS211180\\client_admin\\src\\views\\user\\info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_admin\\src\\views\\user\\info.vue","mtime":1642670047000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\localCode\\CS211180\\client_admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtaXhpbiBmcm9tICdAL21peGlucy9wYWdlLmpzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG1peGluczogW21peGluXSwKICAgIGNvbXBvbmVudHM6IHt9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyDot6/lvoQKICAgICAgICAgICAgdXJsX2dldF9vYmo6ICJ+L2FwaS91c2VyL2dldF9vYmo/IiwKICAgICAgICAgICAgdXJsX3NldDogIn4vYXBpL3VzZXIvc2V0PyIsCiAgICAgICAgICAgIHVybF91cGxvYWQ6ICJ+L2FwaS91c2VyL3VwbG9hZD8iLAogICAgICAgICAgICB1cmxfdXNlcl9ncm91cF9nZXRfb2JqOiAifi9hcGkvdXNlcl9ncm91cC9nZXRfb2JqPyIsCiAgICAgICAgICAgIHNvdXJjZV90YWJsZTogbnVsbCwKICAgICAgICAgICAgc291cmNlX3RhYmxlX25hbWU6IG51bGwsCiAgICAgICAgICAgIHNvdXJjZV90YWJsZV9jaGVja191cmw6ICIiLAogICAgICAgICAgICBzb3VyY2VfdGFibGVfdXJsOiIiLAoKICAgICAgICAgICAgLy8g5a2X5q61CiAgICAgICAgICAgIGZpZWxkOiAidXNlcl9pZCIsCgogICAgICAgICAgICAvLyDmn6Xor6IKICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgICJ1c2VyX2lkIjogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyDooajljZUKICAgICAgICAgICAgZm9ybTogewogICAgICAgICAgICAgICAgdXNlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlci51c2VyX2lkLAogICAgICAgICAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgICAgICAgICAgcGhvbmU6ICIiLAogICAgICAgICAgICAgICAgZW1haWw6ICIiLAogICAgICAgICAgICAgICAgbmlja25hbWU6ICIiLAogICAgICAgICAgICAgICAgYXZhdGFyOiAiIgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbGlzdF91c2VyX3N0YXRlOiBbewogICAgICAgICAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgICAgICAgICBuYW1lOiAi5Y+v55SoIgogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB2YWx1ZTogMiwKICAgICAgICAgICAgICAgIG5hbWU6ICLlvILluLgiCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHZhbHVlOiAzLAogICAgICAgICAgICAgICAgbmFtZTogIuW3suWGu+e7kyIKICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdmFsdWU6IDQsCiAgICAgICAgICAgICAgICBuYW1lOiAi5bey5rOo6ZSAIgogICAgICAgICAgICB9XSwKCiAgICAgICAgICAgIC8vIOagoemqjOinhOWImQogICAgICAgICAgICBydWxlczogewogICAgICAgICAgICAgICAgbmlja25hbWU6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5pi156ew5LiN6IO95Li656m677yBJywKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMiwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+mVv+W6puWcqCAyIOWIsCAxNiDkuKrlrZfnrKYnLAogICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICAgICAgICAgICAgbWluOiAxMSwKICAgICAgICAgICAgICAgICAgICBtYXg6IDExLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqbkuLogMTEg5Liq5a2X56ymJywKICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC8qKgogICAgICAgICAqIOS4iuS8oOWwgemdouWbvgogICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbQogICAgICAgICAqLwogICAgICAgIHVwbG9hZEF2YXRhcihwYXJhbSkgewogICAgICAgICAgICB0aGlzLnVwbG9hZEZpbGUocGFyYW0uZmlsZSwgImF2YXRhciIpOwogICAgICAgIH0sCgogICAgICAgIC8qKgogICAgICAgICAqIEBkZXNjcmlwdGlvbiDojrflj5bnlKjmiLfkv6Hmga8KICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIOWbnuiwg+WHveaVsAogICAgICAgICAqLwogICAgICAgIGFzeW5jIHN1Ym1pdF9hZnRlcihqc29uLCBmdW5jKXsKICAgICAgICAgICAgdGhpcy4kZ2V0X3VzZXIoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMub2F1dGguc2lnbkluKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudXNlci51c2VyX2lkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaJp+ihjOiOt+WPluadg+mZkOW5tuWtmOWCqAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRnZXRfYXV0aCh0aGlzLnVzZXIudXNlcl9ncm91cCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmMoanNvbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiAiL2xvZ2luIgogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZ1bmMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuYyhqc29uKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRfb2JqX2FmdGVyKGpzb24sIGZ1bmMpewogICAgICAgICAgICBsZXQgdXNlcl9ncm91cCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcl9ncm91cDsKICAgICAgICAgICAgdmFyIGpzb24gPSBhd2FpdCB0aGlzLiRnZXQoIn4vYXBpL3VzZXJfZ3JvdXAvZ2V0X29iaj9uYW1lPSIrdXNlcl9ncm91cCk7CiAgICAgICAgICAgIGlmKGpzb24ucmVzdWx0ICYmIGpzb24ucmVzdWx0Lm9iail7CiAgICAgICAgICAgICAgICBpZiAoanNvbi5yZXN1bHQub2JqLnNvdXJjZV90YWJsZSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlX3RhYmxlID0ganNvbi5yZXN1bHQub2JqLnNvdXJjZV90YWJsZQogICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlX3RhYmxlX25hbWUgPSB1c2VyX2dyb3VwCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VfdGFibGVfY2hlY2tfdXJsID0gIi8iK3RoaXMuc291cmNlX3RhYmxlICsiL3ZpZXciOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlX3RhYmxlX3VybCA9IHRoaXMuc291cmNlX3RhYmxlX2NoZWNrX3VybCsiP3VzZXJfaWQ9IiArdGhpcy5mb3JtLnVzZXJfaWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkge30KfQo="},{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n    <div class=\"warp\" id=\"user_info\">\r\n        <el-row class=\"card\">\r\n            <el-col>\r\n                <h1 class=\"text-center\">\r\n                    个人信息管理\r\n                </h1>\r\n            </el-col>\r\n            <el-col>\r\n                <el-form ref=\"form\" :rules=\"rules\" :model=\"form\" label-width=\"100px\">\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item label=\"头像\">\r\n                            <el-upload class=\"avatar-uploader\" drag accept=\"image/gif, image/jpeg, image/png, image/jpg\"\r\n                                action=\"\" :http-request=\"uploadAvatar\" :show-file-list=\"false\">\r\n                                <img v-if=\"form.avatar\" :src=\"$fullUrl(form.avatar)\" class=\"avatar\">\r\n                                <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                            </el-upload>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item label=\"用户名\" prop=\"username\">\r\n                            {{obj.username}}\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item prop=\"nickname\" label=\"昵称\">\r\n                            <el-input v-model=\"form.nickname\" :minlength=\"0\" :maxlength=\"16\" placeholder=\"\" />\r\n                        </el-form-item>\r\n                    </el-col>\r\n\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item label=\"用户组\" prop=\"user_group\">\r\n                            {{obj.user_group}}\r\n                        </el-form-item>\r\n                    </el-col>\r\n\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item prop=\"phone\" label=\"手机号码\">\r\n                            <el-input v-model=\"form.phone\" :minlength=\"0\" :maxlength=\"11\"\r\n                                placeholder=\"用户的手机号码，用于找回密码时或登录时\" />\r\n                        </el-form-item>\r\n                    </el-col>\r\n\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item label=\"状态\" prop=\"state\">\r\n                            {{list_user_state.getVal(\"name\",{\"value\": obj.state})}}\r\n                        </el-form-item>\r\n                    </el-col>\r\n\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item prop=\"email\" label=\"邮箱\">\r\n                            <el-input v-model=\"form.email\" :minlength=\"0\" :maxlength=\"64\"\r\n                                placeholder=\"用户的邮箱，用于找回密码时或登录时\" />\r\n                        </el-form-item>\r\n                    </el-col>\r\n\r\n                    <el-col :xs=\"24\" :sm=\"12\" :lg=\"8\">\r\n                        <el-form-item>\r\n                            <el-button type=\"primary\" @click=\"submit()\">提交</el-button>\r\n                            <el-button @click=\"cancel()\">取消</el-button>\r\n                            <router-link v-if=\"source_table && $check_action(source_table_check_url,'set')\" class=\"el-button float-right el-button--default el-button--primary\"\r\n                                         :to=\"source_table_url\">详情\r\n                            </router-link>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-form>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import mixin from '@/mixins/page.js';\r\n\r\n    export default {\r\n        mixins: [mixin],\r\n        components: {},\r\n        data() {\r\n            return {\r\n                // 路径\r\n                url_get_obj: \"~/api/user/get_obj?\",\r\n                url_set: \"~/api/user/set?\",\r\n                url_upload: \"~/api/user/upload?\",\r\n                url_user_group_get_obj: \"~/api/user_group/get_obj?\",\r\n                source_table: null,\r\n                source_table_name: null,\r\n                source_table_check_url: \"\",\r\n                source_table_url:\"\",\r\n\r\n                // 字段\r\n                field: \"user_id\",\r\n\r\n                // 查询\r\n                query: {\r\n                    \"user_id\": this.$store.state.user.user_id\r\n                },\r\n\r\n                // 表单\r\n                form: {\r\n                    user_id: this.$store.state.user.user_id,\r\n                    username: \"\",\r\n                    phone: \"\",\r\n                    email: \"\",\r\n                    nickname: \"\",\r\n                    avatar: \"\"\r\n                },\r\n\r\n                list_user_state: [{\r\n                    value: 1,\r\n                    name: \"可用\"\r\n                }, {\r\n                    value: 2,\r\n                    name: \"异常\"\r\n                }, {\r\n                    value: 3,\r\n                    name: \"已冻结\"\r\n                }, {\r\n                    value: 4,\r\n                    name: \"已注销\"\r\n                }],\r\n\r\n                // 校验规则\r\n                rules: {\r\n                    nickname: [{\r\n                            required: true,\r\n                            message: '昵称不能为空！',\r\n                            trigger: 'blur'\r\n                        },\r\n                        {\r\n                            min: 2,\r\n                            max: 16,\r\n                            message: '长度在 2 到 16 个字符',\r\n                            trigger: 'blur'\r\n                        }\r\n                    ],\r\n                    phone: [{\r\n                        min: 11,\r\n                        max: 11,\r\n                        message: '长度为 11 个字符',\r\n                        trigger: 'blur'\r\n                    }]\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            /**\r\n             * 上传封面图\r\n             * @param {Object} param\r\n             */\r\n            uploadAvatar(param) {\r\n                this.uploadFile(param.file, \"avatar\");\r\n            },\r\n\r\n            /**\r\n             * @description 获取用户信息\r\n             * @param {Function} func 回调函数\r\n             */\r\n            async submit_after(json, func){\r\n                this.$get_user(() => {\r\n                    if (this.oauth.signIn) {\r\n                        if (this.user.user_id) {\r\n                            // 执行获取权限并存储\r\n                            this.$get_auth(this.user.user_group)\r\n                            if (func) {\r\n                                func(json);\r\n                            }\r\n                            this.$router.go(-1);\r\n                        } else {\r\n                            this.$router.push({\r\n                                path: \"/login\"\r\n                            })\r\n                        }\r\n                    } else {\r\n                        if (func) {\r\n                            func(json);\r\n                        }\r\n                        this.$router.go(-1);\r\n                    }\r\n                });\r\n            },\r\n            async get_obj_after(json, func){\r\n                let user_group = this.$store.state.user.user_group;\r\n                var json = await this.$get(\"~/api/user_group/get_obj?name=\"+user_group);\r\n                if(json.result && json.result.obj){\r\n                    if (json.result.obj.source_table) {\r\n                        this.source_table = json.result.obj.source_table\r\n                        this.source_table_name = user_group\r\n                        this.source_table_check_url = \"/\"+this.source_table +\"/view\";\r\n                        this.source_table_url = this.source_table_check_url+\"?user_id=\" +this.form.user_id\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        created() {}\r\n    }\r\n</script>\r\n\r\n\r\n<style>\r\n    #user_info .card {\r\n        padding: 2rem 1rem;\r\n    }\r\n\r\n    #user_info .text-center {\r\n        text-align: center;\r\n    }\r\n\r\n    #user_info .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n\r\n    #user_info .avatar-uploader .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n\r\n    #user_info .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 178px;\r\n        height: 178px;\r\n        line-height: 178px;\r\n        text-align: center;\r\n    }\r\n\r\n    #user_info .avatar {\r\n        width: 178px;\r\n        height: 178px;\r\n        display: block;\r\n    }\r\n</style>\r\n"]}]}